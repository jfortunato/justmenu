(function(n,e,A){"use strict";function x(s,g,k){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,c,b,f,w){function y(){p&&(p.remove(),p=null);h&&(h.$destroy(),h=null);l&&(k.leave(l,function(){p=null}),p=l,l=null)}function v(){var b=s.current&&s.current.locals;if(e.isDefined(b&&b.$template)){var b=a.$new(),d=s.current;l=w(b,function(d){k.enter(d,null,l||c,function(){!e.isDefined(t)||t&&!a.$eval(t)||g()});y()});h=d.scope=b;h.$emit("$viewContentLoaded");h.$eval(u)}else y()}var h,l,p,t=b.autoscroll,u=b.onload||"";a.$on("$routeChangeSuccess",v);v()}}}function z(e,g,k){return{restrict:"ECA",priority:-400,link:function(a,c){var b=k.current,f=b.locals;c.html(f.$template);var w=e(c.contents());b.controller&&(f.$scope=a,f=g(b.controller,f),b.controllerAs&&(a[b.controllerAs]=f),c.data("$ngControllerController",f),c.children().data("$ngControllerController",f));w(a)}}}n=e.module("ngRoute",["ng"]).provider("$route",function(){function s(a,c){return e.extend(new(e.extend(function(){},{prototype:a})),c)}function g(a,e){var b=e.caseInsensitiveMatch,f={originalPath:a,regexp:a},k=f.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,e,b,c){a="?"===c?c:null;c="*"===c?c:null;k.push({name:b,optional:!!a});e=e||"";return""+(a?"":e)+"(?:"+(a?e:"")+(c&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");f.regexp=RegExp("^"+a+"$",b?"i":"");return f}var k={};this.when=function(a,c){k[a]=e.extend({reloadOnSearch:!0},c,a&&g(a,c));if(a){var b="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";k[b]=e.extend({redirectTo:a},g(b,c))}return this};this.otherwise=function(a){this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(a,c,b,f,g,n,v,h){function l(){var d=p(),m=r.current;if(d&&m&&d.$$route===m.$$route&&e.equals(d.pathParams,m.pathParams)&&!d.reloadOnSearch&&!u)m.params=d.params,e.copy(m.params,b),a.$broadcast("$routeUpdate",m);else if(d||m)u=!1,a.$broadcast("$routeChangeStart",d,m),(r.current=d)&&d.redirectTo&&(e.isString(d.redirectTo)?c.path(t(d.redirectTo,d.params)).search(d.params).replace():c.url(d.redirectTo(d.pathParams,c.path(),c.search())).replace()),f.when(d).then(function(){if(d){var a=e.extend({},d.resolve),c,b;e.forEach(a,function(d,c){a[c]=e.isString(d)?g.get(d):g.invoke(d)});e.isDefined(c=d.template)?e.isFunction(c)&&(c=c(d.params)):e.isDefined(b=d.templateUrl)&&(e.isFunction(b)&&(b=b(d.params)),b=h.getTrustedResourceUrl(b),e.isDefined(b)&&(d.loadedTemplateUrl=b,c=n.get(b,{cache:v}).then(function(a){return a.data})));e.isDefined(c)&&(a.$template=c);return f.all(a)}}).then(function(c){d==r.current&&(d&&(d.locals=c,e.copy(d.params,b)),a.$broadcast("$routeChangeSuccess",d,m))},function(c){d==r.current&&a.$broadcast("$routeChangeError",d,m,c)})}function p(){var a,b;e.forEach(k,function(f,k){var q;if(q=!b){var g=c.path();q=f.keys;var l={};if(f.regexp)if(g=f.regexp.exec(g)){for(var h=1,p=g.length;h<p;++h){var n=q[h-1],r="string"==typeof g[h]?decodeURIComponent(g[h]):g[h];n&&r&&(l[n.name]=r)}q=l}else q=null;else q=null;q=a=q}q&&(b=s(f,{params:e.extend({},c.search(),a),pathParams:a}),b.$$route=f)});return b||k[null]&&s(k[null],{params:{},pathParams:{}})}function t(a,c){var b=[];e.forEach((a||"").split(":"),function(a,d){if(0===d)b.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];b.push(c[f]);b.push(e[2]||"");delete c[f]}});return b.join("")}var u=!1,r={routes:k,reload:function(){u=!0;a.$evalAsync(l)}};a.$on("$locationChangeSuccess",l);return r}]});n.provider("$routeParams",function(){this.$get=function(){return{}}});n.directive("ngView",x);n.directive("ngView",z);x.$inject=["$route","$anchorScroll","$animate"];z.$inject=["$compile","$controller","$route"]})(window,window.angular);angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.modal"]);angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer();var endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"];var transitionEndHandler=function(event){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler);deferred.resolve(element)})};if(endEventName){element.bind(endEventName,transitionEndHandler)}$timeout(function(){if(angular.isString(trigger)){element.addClass(trigger)}else if(angular.isFunction(trigger)){trigger(element)}else if(angular.isObject(trigger)){element.css(trigger)}if(!endEventName){deferred.resolve(element)}});deferred.promise.cancel=function(){if(endEventName){element.unbind(endEventName,transitionEndHandler)}deferred.reject("Transition cancelled")};return deferred.promise};var transElement=document.createElement("trans");var transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"};var animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};function findEndEventName(endEventNames){for(var name in endEventNames){if(transElement.style[name]!==undefined){return endEventNames[name]}}}$transition.transitionEndEventName=findEndEventName(transitionEndEventNames);$transition.animationEndEventName=findEndEventName(animationEndEventNames);return $transition}]);angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++){if(key==stack[i].key){return stack[i]}}},keys:function(){var keys=[];for(var i=0;i<stack.length;i++){keys.push(stack[i].key)}return keys},top:function(){return stack[stack.length-1]},remove:function(key){var idx=-1;for(var i=0;i<stack.length;i++){if(key==stack[i].key){idx=i;break}}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:true,templateUrl:"template/modal/backdrop.html",link:function(scope){scope.animate=false;$timeout(function(){scope.animate=true})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:true,transclude:true,templateUrl:"template/modal/window.html",link:function(scope,element,attrs){scope.windowClass=attrs.windowClass||"";$timeout(function(){scope.animate=true;element[0].focus()});scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&modal.value.backdrop!="static"&&evt.target===evt.currentTarget){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,"backdrop click")}}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){var OPENED_MODAL_CLASS="modal-open";var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var $modalStack={};function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++){if(openedWindows.get(opened[i]).value.backdrop){topBackdropIndex=i}}return topBackdropIndex}$rootScope.$watch(backdropIndex,function(newBackdropIndex){if(backdropScope){backdropScope.index=newBackdropIndex}});function removeModalWindow(modalInstance){var body=$document.find("body").eq(0);var modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance);removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,checkRemoveBackdrop);body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0)}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()==-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy();backdropScopeRef=null});backdropDomEl=undefined;backdropScope=undefined}}function removeAfterAnimate(domEl,scope,emulateTime,done){scope.animate=false;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout);afterAnimating();scope.$apply()})}else{$timeout(afterAnimating,0)}function afterAnimating(){if(afterAnimating.done){return}afterAnimating.done=true;domEl.remove();if(done){done()}}}$document.bind("keydown",function(evt){var modal;if(evt.which===27){modal=openedWindows.top();if(modal&&modal.value.keyboard){$rootScope.$apply(function(){$modalStack.dismiss(modal.key)})}}});$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.index=currBackdropIndex;backdropDomEl=$compile("<div modal-backdrop></div>")(backdropScope);body.append(backdropDomEl)}var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr("window-class",modal.windowClass);angularDomEl.attr("index",openedWindows.length()-1);angularDomEl.attr("animate","animate");angularDomEl.html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl;body.append(modalDomEl);body.addClass(OPENED_MODAL_CLASS)};$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance).value;if(modalWindow){modalWindow.deferred.resolve(result);removeModalWindow(modalInstance)}};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance).value;if(modalWindow){modalWindow.deferred.reject(reason);removeModalWindow(modalInstance)}};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal){this.dismiss(topModal.key,reason);topModal=this.getTop()}};$modalStack.getTop=function(){return openedWindows.top()};return $modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:true,keyboard:true},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];angular.forEach(resolves,function(value,key){if(angular.isFunction(value)||angular.isArray(value)){promisesArr.push($q.when($injector.invoke(value)))}});return promisesArr}$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function(result){$modalStack.close(modalInstance,result)},dismiss:function(reason){$modalStack.dismiss(modalInstance,reason)}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};if(!modalOptions.template&&!modalOptions.templateUrl){throw new Error("One of template or templateUrl options is required.")}var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));templateAndResolvePromise.then(function resolveSuccess(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={};var resolveIter=1;if(modalOptions.controller){ctrlLocals.$scope=modalScope;ctrlLocals.$modalInstance=modalInstance;angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]});ctrlInstance=$controller(modalOptions.controller,ctrlLocals)}$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,windowClass:modalOptions.windowClass})},function resolveError(reason){modalResultDeferred.reject(reason)});templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(true)},function(){modalOpenedDeferred.reject(false)});return modalInstance};return $modal}]};return $modalProvider});angular.module("justmenu",["ngRoute","justmenu.menu","justmenu.modal","justmenu.cart","justmenu.admin","ui.bootstrap"]).controller("MainController",function(){}).config(["$routeProvider",function($routeProvider){$routeProvider.when("/order-online",{templateUrl:"template/menu/view.html",controller:"MenuController"}).when("/admin",{templateUrl:"template/admin/view.html",controller:"AdminController"}).otherwise({redirectTo:"/order-online"})}]).filter("parens",function(){return function(input){return input?"("+input+")":""}});(function(){"use strict";var angularLocalStorage=angular.module("LocalStorageModule",[]);angularLocalStorage.provider("localStorageService",function(){this.prefix="ls";this.storageType="localStorage";this.cookie={expiry:30,path:"/"};this.notify={setItem:true,removeItem:false};this.setPrefix=function(prefix){this.prefix=prefix};this.setStorageType=function(storageType){this.storageType=storageType};this.setStorageCookie=function(exp,path){this.cookie={expiry:exp,path:path}};this.setStorageCookieDomain=function(domain){this.cookie.domain=domain};this.setNotify=function(itemSet,itemRemove){this.notify={setItem:itemSet,removeItem:itemRemove}};this.$get=["$rootScope","$window","$document",function($rootScope,$window,$document){var prefix=this.prefix;var cookie=this.cookie;var notify=this.notify;var storageType=this.storageType;var webStorage=$window[storageType];if(!$document){$document=document}if(prefix.substr(-1)!=="."){prefix=!!prefix?prefix+".":""}var browserSupportsLocalStorage=function(){try{var supported=storageType in $window&&$window[storageType]!==null;var key=prefix+"__"+Math.round(Math.random()*1e7);if(supported){webStorage.setItem(key,"");webStorage.removeItem(key)}return true}catch(e){storageType="cookie";$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}}();var addToLocalStorage=function(key,value){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");if(notify.setItem){$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:"cookie"})}return addToCookies(key,value)}if(typeof value==="undefined"){value=null}try{if(angular.isObject(value)||angular.isArray(value)){value=angular.toJson(value)}webStorage.setItem(prefix+key,value);if(notify.setItem){$rootScope.$broadcast("LocalStorageModule.notification.setitem",{key:key,newvalue:value,storageType:this.storageType})}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return addToCookies(key,value)}return true};var getFromLocalStorage=function(key){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");return getFromCookies(key)}var item=webStorage.getItem(prefix+key);if(!item||item==="null"){return null}if(item.charAt(0)==="{"||item.charAt(0)==="["){return angular.fromJson(item)}return item};var removeFromLocalStorage=function(key){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");if(notify.removeItem){$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:"cookie"})}return removeFromCookies(key)}try{webStorage.removeItem(prefix+key);if(notify.removeItem){$rootScope.$broadcast("LocalStorageModule.notification.removeitem",{key:key,storageType:this.storageType})}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return removeFromCookies(key)}return true};var getKeysForLocalStorage=function(){if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");return false}var prefixLength=prefix.length;var keys=[];for(var key in webStorage){if(key.substr(0,prefixLength)===prefix){try{keys.push(key.substr(prefixLength))}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.Description);return[]}}}return keys};var clearAllFromLocalStorage=function(regularExpression){regularExpression=regularExpression||"";var tempPrefix=prefix.slice(0,-1);var testRegex=new RegExp(tempPrefix+"."+regularExpression);if(!browserSupportsLocalStorage){$rootScope.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");return clearAllFromCookies()}var prefixLength=prefix.length;for(var key in webStorage){if(testRegex.test(key)){try{removeFromLocalStorage(key.substr(prefixLength))}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return clearAllFromCookies()}}}return true};var browserSupportsCookies=function(){try{return navigator.cookieEnabled||"cookie"in $document&&($document.cookie.length>0||($document.cookie="test").indexOf.call($document.cookie,"test")>-1)}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}};var addToCookies=function(key,value){if(typeof value==="undefined"){return false}if(!browserSupportsCookies()){$rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false}try{var expiry="",expiryDate=new Date,cookieDomain="";if(value===null){expiryDate.setTime(expiryDate.getTime()+-1*24*60*60*1e3);expiry="; expires="+expiryDate.toGMTString();value=""}else if(cookie.expiry!==0){expiryDate.setTime(expiryDate.getTime()+cookie.expiry*24*60*60*1e3);expiry="; expires="+expiryDate.toGMTString()}if(!!key){var cookiePath="; path="+cookie.path;if(cookie.domain){cookieDomain="; domain="+cookie.domain}$document.cookie=prefix+key+"="+encodeURIComponent(value)+expiry+cookiePath+cookieDomain}}catch(e){$rootScope.$broadcast("LocalStorageModule.notification.error",e.message);return false}return true};var getFromCookies=function(key){if(!browserSupportsCookies()){$rootScope.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false}var cookies=$document.cookie&&$document.cookie.split(";")||[];for(var i=0;i<cookies.length;i++){var thisCookie=cookies[i];while(thisCookie.charAt(0)===" "){thisCookie=thisCookie.substring(1,thisCookie.length)}if(thisCookie.indexOf(prefix+key+"=")===0){return decodeURIComponent(thisCookie.substring(prefix.length+key.length+1,thisCookie.length))}}return null};var removeFromCookies=function(key){addToCookies(key,null)};var clearAllFromCookies=function(){var thisCookie=null,thisKey=null;var prefixLength=prefix.length;var cookies=$document.cookie.split(";");for(var i=0;i<cookies.length;i++){thisCookie=cookies[i];while(thisCookie.charAt(0)===" "){thisCookie=thisCookie.substring(1,thisCookie.length)}var key=thisCookie.substring(prefixLength,thisCookie.indexOf("="));removeFromCookies(key)}};var getStorageType=function(){return storageType};return{isSupported:browserSupportsLocalStorage,getStorageType:getStorageType,set:addToLocalStorage,add:addToLocalStorage,get:getFromLocalStorage,keys:getKeysForLocalStorage,remove:removeFromLocalStorage,clearAll:clearAllFromLocalStorage,cookie:{set:addToCookies,add:addToCookies,get:getFromCookies,remove:removeFromCookies,clearAll:clearAllFromCookies}}}]})}).call(this);angular.module("justmenu.modal",["justmenu.modal.directives"]);angular.module("justmenu.modal.directives",[]).directive("jmModal",function(){return{restrict:"E",transclude:true,templateUrl:"/assets/angular/components/modal/modal.html",scope:{modalShowing:"=show",positiveAction:"&"},link:function($scope){$scope.hideModal=function(){$scope.modalShowing=false}}}});angular.module("justmenu.cart.services",["LocalStorageModule"]).factory("Cart",["$rootScope","localStorageService",function($rootScope,localStorageService){var service={cart:localStorageService.get("cart")||[],lastCart:[],addItem:function(item){this.lastCart=[];this.cart.push(item)},removeItem:function(item){this.cart.splice(this.cart.indexOf(item),1)},save:function(){localStorageService.add("cart",this.cart)},increaseQuantity:function(item){item.quantity++},decreaseQuantity:function(item){item.quantity--;if(item.quantity<=0){this.removeItem(item)}},empty:function(){this.lastCart=this.cart;this.cart=[]},undoEmpty:function(){this.cart=this.lastCart;this.lastCart=[]},total:function(){var subtotal=0,tax=0,total=0;this.cart.forEach(function(item){var price=parseFloat(item.price);item.selected_options.forEach(function(option){price+=parseFloat(option.price)});price*=item.quantity;subtotal+=price});tax=0;total=subtotal+tax;return total}};return service}]);angular.module("justmenu.cart",["justmenu.cart.directives","justmenu.cart.controllers","justmenu.cart.services"]);angular.module("justmenu.cart.controllers",[]).controller("CartController",["$scope","Cart",function($scope,Cart){var cart=$scope.cart=Cart;$scope.$watch("cart",function(newValue,oldValue){if(newValue!==oldValue){Cart.save()}},true)}]);angular.module("justmenu.cart.directives",[]).directive("jmCart",function(){return{restrict:"E",templateUrl:"template/cart/cart.html"}});angular.module("justmenu.admin",["justmenu.admin.controllers","justmenu.admin.directives"]);angular.module("justmenu.admin.directives",[]).directive("jmEditable",["$compile","$http",function($compile,$http){return{restrict:"A",link:function($scope,element,attrs){var text;$scope.dismiss=function(){element.html(text)};$scope.save=function(){text=element.find("input").val();element.html(text)};element.on("dblclick",function(){text=element.text();element.html('<input type="text" value="'+text+'" /><button class="jm-btn" ng-click="save()" type="button">Save</button><button class="jm-btn" ng-click="dismiss()">Cancel</button>');$compile(element.contents())($scope)})}}}]);angular.module("justmenu.admin.controllers",[]).controller("AdminController",["$scope","Menu",function($scope,Menu){$scope.menu=Menu.all();$scope.toggleCategory=function($index){$scope.selectedIndex=$index}}]);angular.module("justmenu.menu",["justmenu.menu.services","justmenu.menu.controllers","justmenu.menu.directives"]);angular.module("justmenu.menu.services",["ngResource"]).factory("Menu",["$rootScope","$resource",function($rootScope,$resource){return{all:function(){var menu=this.resource().get(function(){var categories=menu.categories;categories.forEach(function(category){category.items.forEach(function(item){if(item.items){item.items.forEach(function(choice){choice.menu_component_options=choice.menu_component_options.concat(category.menu_component_options)})}else{item.menu_component_options=item.menu_component_options.concat(category.menu_component_options)}})})});return menu},resource:function(){return $resource("menu.json")}}}]);angular.module("justmenu.menu.controllers",[]).controller("MenuController",["$scope","Menu",function($scope,Menu){$scope.menu=Menu.all();$scope.toggleCategory=function($index){$scope.selectedIndex=$index};$scope.toggleSlide=function(){$scope.slide=!$scope.slide}}]);angular.module("justmenu.menu.directives",["justmenu.cart.services"]).directive("jmSelectItem",["Cart","$rootScope","$modal",function(Cart,$rootScope,$modal){return{restrict:"A",scope:{item:"=",size:"="},link:function(scope,element,attrs){var item=scope.item;var size=scope.size;function process(){if(item.items){showChoices()}else if(item.menu_component_options.length){showOptions()}else{addItem()}}function showChoices(){$modal.open({templateUrl:"template/modal/choices.html",resolve:{choices:function(){return item.items},size:function(){return size}},controller:function($scope,$modalInstance,choices,size){$scope.choices=choices;$scope.size=size;$scope.selected=function(){$modalInstance.close()}}})}function showOptions(){$modal.open({templateUrl:"template/modal/options.html",resolve:{options:function(){var options=[];item.menu_component_options.forEach(function(option){if(option.size===size.size||option.size==="any"){options.push(option)}});return options}},controller:function($scope,$modalInstance,options){$scope.options=options;$scope.selected=function(){var selected_options=[];[].map.call(document.querySelectorAll(".modal input:checked"),function(obj){selected_options.push({title:obj.value,price:obj.dataset.price})});item.selected_options=selected_options;addItem();$modalInstance.close()}}})}function addItem(){var newItem={item_id:item.id,quantity:1,title:item.title,size:size.size,price:size.price,selected_options:item.selected_options||[]};Cart.addItem(newItem)}element.bind("click",function(){process();scope.$apply()})}}}]);(function(H,a,A){"use strict";function D(p,g){g=g||{};a.forEach(g,function(a,c){delete g[c]});for(var c in p)!p.hasOwnProperty(c)||"$"===c.charAt(0)&&"$"===c.charAt(1)||(g[c]=p[c]);return g}var v=a.$$minErr("$resource"),C=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;a.module("ngResource",["ng"]).factory("$resource",["$http","$q",function(p,g){function c(a,c){this.template=a;this.defaults=c||{};this.urlParams={}}function t(n,w,l){function r(h,d){var e={};d=x({},w,d);s(d,function(b,d){u(b)&&(b=b());var k;if(b&&b.charAt&&"@"==b.charAt(0)){k=h;var a=b.substr(1);if(null==a||""===a||"hasOwnProperty"===a||!C.test("."+a))throw v("badmember",a);for(var a=a.split("."),f=0,c=a.length;f<c&&k!==A;f++){var g=a[f];k=null!==k?k[g]:A}}else k=b;e[d]=k});return e}function e(a){return a.resource}function f(a){D(a||{},this)}var F=new c(n);l=x({},B,l);s(l,function(h,d){var c=/^(POST|PUT|PATCH)$/i.test(h.method);f[d]=function(b,d,k,w){var q={},n,l,y;switch(arguments.length){case 4:y=w,l=k;case 3:case 2:if(u(d)){if(u(b)){l=b;y=d;break}l=d;y=k}else{q=b;n=d;l=k;break}case 1:u(b)?l=b:c?n=b:q=b;break;case 0:break;default:throw v("badargs",arguments.length)}var t=this instanceof f,m=t?n:h.isArray?[]:new f(n),z={},B=h.interceptor&&h.interceptor.response||e,C=h.interceptor&&h.interceptor.responseError||A;s(h,function(a,b){"params"!=b&&("isArray"!=b&&"interceptor"!=b)&&(z[b]=G(a))});c&&(z.data=n);F.setUrlParams(z,x({},r(n,h.params||{}),q),h.url);q=p(z).then(function(b){var d=b.data,k=m.$promise;if(d){if(a.isArray(d)!==!!h.isArray)throw v("badcfg",h.isArray?"array":"object",a.isArray(d)?"array":"object");h.isArray?(m.length=0,s(d,function(b){m.push(new f(b))})):(D(d,m),m.$promise=k)}m.$resolved=!0;b.resource=m;return b},function(b){m.$resolved=!0;(y||E)(b);return g.reject(b)});q=q.then(function(b){var a=B(b);(l||E)(a,b.headers);return a},C);return t?q:(m.$promise=q,m.$resolved=!1,m)};f.prototype["$"+d]=function(b,a,k){u(b)&&(k=a,a=b,b={});b=f[d].call(this,b,this,a,k);return b.$promise||b}});f.bind=function(a){return t(n,x({},w,a),l)};return f}var B={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},E=a.noop,s=a.forEach,x=a.extend,G=a.copy,u=a.isFunction;c.prototype={setUrlParams:function(c,g,l){var r=this,e=l||r.template,f,p,h=r.urlParams={};s(e.split(/\W/),function(a){if("hasOwnProperty"===a)throw v("badname");!/^\d+$/.test(a)&&(a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(e))&&(h[a]=!0)});e=e.replace(/\\:/g,":");g=g||{};s(r.urlParams,function(d,c){f=g.hasOwnProperty(c)?g[c]:r.defaults[c];a.isDefined(f)&&null!==f?(p=encodeURIComponent(f).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),e=e.replace(RegExp(":"+c+"(\\W|$)","g"),function(a,c){return p+c})):e=e.replace(RegExp("(/?):"+c+"(\\W|$)","g"),function(a,c,d){return"/"==d.charAt(0)?d:c+d})});e=e.replace(/\/+$/,"")||"/";e=e.replace(/\/\.(?=\w+($|\?))/,".");c.url=e.replace(/\/\\\./,"/.");s(g,function(a,e){r.urlParams[e]||(c.params=c.params||{},c.params[e]=a)})}};return t}])})(window,window.angular);